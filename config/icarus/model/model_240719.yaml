# ICARUS model configuration
# Revision date: July 19, 2024

__meta__:
  version: "240719"
  date: "2024-07-19"
  description: "ICARUS model with average charge rescaling"
  compatible_with:
    base: ">=240719"
    io: "==240719"
  tags: [average-charge]
  training_set: "v2"

include: model_common.yaml

override:
  # Path to the v2 model weights
  model.weight_path: /sdf/data/neutrino/icarus/spine/train/mpvmpr_v02/weights/full_chain/default/snapshot-7999.ckpt

  # No calibration applied in the chain, handled in post-processing
  model.modules.chain.calibration: null
  model.modules.calibration: null
  model.network_input-:
    - meta
    - run_info

  # Charge rescaling uses average charge
  model.modules.chain.charge_rescaling: average

  # Older PPN/GrapPA loss settings
  model.modules.uresnet_ppn.ppn.classify_endpoints: true
  model.modules.uresnet_ppn_loss.ppn_loss.restrict_to_clusters: false
  model.modules.grappa_shower_loss.node_loss.use_closest: false

  # Interaction grouping restriction not applied
  model.modules.grappa_inter.nodes.grouping_through_track: false
